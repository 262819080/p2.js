<!DOCTYPE html>
<html>
<head>
    <title>spring2d.js</title>
    <script src="demo.js"></script>
    <link href="demo.css" rel="stylesheet"/>
    <script src="../spring2d.js"></script>
</head>
<body>
    <script>
        demo.createScene(function(world){
            var particles = [];
            var l = 20, N=10, M=15;
            var timeStep = 1/60,
                r=0.5,
                m=1;
            world.gravity.set(0,-10);
            world.solver.setSpookParams(1e10,3);
            world.solver.iterations = 5;

            // Create circle bodies
            var shape = new Spring2D.Circle(r);
            for(var i=0; i<N; i++){
                for(var j=0; j<M; j++){
                    var p = new Spring2D.Body(m,shape);
                    p.position.set(i*r*2.05+Math.random()*r, j*r*2.1+2);
                    world.addBody(p);
                    demo.addVisual(p);
                }
            }

            // Create ground
            var planeShape = new Spring2D.Plane();
            var plane = new Spring2D.Body(0,planeShape);
            world.addBody(plane);

            var planeLeft = new Spring2D.Body(0,planeShape);
            planeLeft.angle = -Math.PI/2;
            world.addBody(planeLeft);

            var planeRight = new Spring2D.Body(0,planeShape);
            planeRight.angle = Math.PI/2;
            planeRight.position.x = M*r*1.5;
            world.addBody(planeRight);
            
        });        
    </script>
</body>
</html>
